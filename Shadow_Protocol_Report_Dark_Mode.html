<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROTOCOL: SHADOW_KZ // LEVEL 5 CLEARANCE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Markdown Parser for AI response -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&family=Orbitron:wght@400;700;900&display=swap');
        
        :root {
            --bg-dark: #050505;
            --card-bg: #0a0a0a;
            --border-color: #1f2937;
            --neon-cyan: #00f3ff;
            --neon-purple: #bc13fe;
            --alert-red: #ff003c;
            --alert-orange: #ff9e00;
            --text-dim: #64748b;
            --text-bright: #e2e8f0;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background-color: var(--bg-dark);
            color: var(--text-dim);
            background-image: 
                radial-gradient(circle at 50% 0%, #1e1b4b 0%, transparent 40%),
                linear-gradient(0deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%),
                url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9IiMxZTFiNGIiIG9wYWNpdHk9IjAuMiIvPjwvc3ZnPg==');
        }

        .hacker-font {
            font-family: 'Orbitron', sans-serif;
        }

        .neon-text {
            text-shadow: 0 0 5px rgba(0, 243, 255, 0.5), 0 0 10px rgba(0, 243, 255, 0.3);
        }
        
        .neon-purple-text {
            text-shadow: 0 0 5px rgba(188, 19, 254, 0.5);
        }

        .cyber-card {
            background-color: rgba(10, 10, 10, 0.8);
            border: 1px solid #333;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            position: relative;
            overflow: hidden;
        }

        .cyber-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg, transparent, var(--neon-cyan), transparent);
            opacity: 0.5;
        }

        .cyber-border-danger {
            border-color: rgba(255, 0, 60, 0.5);
        }
        .cyber-border-danger::before {
            background: linear-gradient(180deg, transparent, var(--alert-red), transparent);
        }

        .glitch-line {
            height: 1px;
            background: var(--neon-cyan);
            width: 100%;
            opacity: 0.3;
            margin: 1rem 0;
            box-shadow: 0 0 5px var(--neon-cyan);
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            height: 300px;
            max-height: 400px;
        }

        /* Flowchart Cyber Styles */
        .cyber-step {
            background: #111;
            border: 1px solid var(--neon-purple);
            color: var(--neon-cyan);
            padding: 1rem;
            position: relative;
            transition: all 0.3s;
        }
        .cyber-step:hover {
            background: rgba(188, 19, 254, 0.1);
            box-shadow: 0 0 15px rgba(188, 19, 254, 0.4);
            transform: translateY(-2px);
        }
        .arrow-down {
            color: var(--text-dim);
            font-size: 1.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.3; }
            50% { opacity: 1; }
            100% { opacity: 0.3; }
        }

        .status-dot {
            height: 8px;
            width: 8px;
            background-color: var(--alert-red);
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            box-shadow: 0 0 5px var(--alert-red);
            animation: blink 1s infinite;
        }
        @keyframes blink { 50% { opacity: 0.4; } }

        /* AI Terminal Styles */
        .ai-terminal-section {
            border-top: 1px solid var(--neon-cyan);
            margin-top: 4rem;
            padding-top: 2rem;
        }

        .ai-input {
            background: #050505;
            border: 1px solid #333;
            color: var(--neon-cyan);
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.3s;
        }
        .ai-input:focus {
            outline: none;
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.15);
        }

        .ai-btn {
            background: rgba(0, 243, 255, 0.05);
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 1px;
            transition: all 0.3s;
            text-transform: uppercase;
            font-weight: bold;
        }
        .ai-btn:hover {
            background: var(--neon-cyan);
            color: #000;
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        .ai-output-box {
            background: #000;
            border: 1px dashed #333;
            min-height: 150px;
            font-size: 0.85rem;
            color: #a3a3a3;
        }
        
        /* Markdown Styles specific to the AI Output */
        .ai-output-box h1, .ai-output-box h2, .ai-output-box h3 {
            color: var(--neon-purple);
            font-family: 'Orbitron', sans-serif;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        .ai-output-box strong { color: var(--neon-cyan); }
        .ai-output-box ul { list-style: square; margin-left: 1.5rem; color: #e2e8f0; }
        .ai-output-box li { margin-bottom: 0.25rem; }
        .ai-output-box p { margin-bottom: 0.75rem; }

        .loader {
            border: 2px solid #111;
            border-top: 2px solid var(--neon-cyan);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    </style>
</head>
<body class="p-4 md:p-8 overflow-x-hidden">

    <div class="max-w-6xl mx-auto space-y-16 relative z-10">

        <!-- Header Section -->
        <header class="text-center space-y-6 pt-8 border-b border-gray-800 pb-12 relative">
            <div class="absolute top-0 left-0 w-full flex justify-between px-4 text-[10px] text-gray-600 font-mono">
                <span>ENCRYPTED_CONN: SECURE</span>
                <span>LOC: ALMATY_NODE_25</span>
                <span>ID: SMM_GHOST</span>
            </div>
            
            <div class="inline-block border border-red-900 bg-red-900/20 px-4 py-1 rounded-sm mb-4">
                <span class="status-dot"></span> <span class="text-red-500 text-xs tracking-[0.2em]">TOP SECRET // EYES ONLY</span>
            </div>

            <h1 class="hacker-font text-4xl md:text-6xl font-black text-white tracking-tighter uppercase leading-none">
                Теневые<br>
                <span class="text-[#00f3ff] neon-text">Алгоритмы</span>
            </h1>
            
            <p class="text-gray-400 max-w-2xl mx-auto text-sm md:text-base font-light tracking-wide">
                > Загрузка оперативного досье: Финансовая анонимность и SMM-инфраструктура.<br>
                > Регион: Республика Казахстан. <br>
                > Статус: <span class="text-[#00f3ff]">Активно</span>.
            </p>
        </header>

        <!-- Section 1: The Strategic Choice (Red Pill / Blue Pill) -->
        <section class="grid md:grid-cols-2 gap-8 items-center">
            <div class="space-y-6">
                <h2 class="hacker-font text-2xl text-white border-l-4 border-[#00f3ff] pl-4">Выбор Вектора Атаки</h2>
                <p>
                    Мы стоим перед развилкой. <strong class="text-white">Облако (Cloud)</strong> — путь быстрого проникновения и гибкости, рекомендуемый "Roadmap B". <strong class="text-white">Железо (Full Self-Hosted)</strong> — путь полной автономии, требующий постройки собственной серверной "крепости".
                </p>
                <p>
                    FSH-сценарий требует управления армией из 100 физических SIM-карт. Месячный счет только за "воздух" (связь) составит <span class="text-[#ff003c]">$1,770</span>. Это выше критического лимита TCO.
                </p>
            </div>

            <div class="cyber-card p-8 text-center">
                <div class="text-xs text-gray-500 uppercase tracking-widest mb-2">Рекомендованный Бюджет (Burn Rate)</div>
                <div class="hacker-font text-6xl text-[#00f3ff] neon-text mb-2">$650</div>
                <div class="text-sm text-gray-400 mb-8">/ месяц [Roadmap B]</div>
                
                <div class="glitch-line"></div>
                
                <div class="text-xs text-gray-500 uppercase tracking-widest mb-2 mt-6">Критический Лимит TCO (90 Days)</div>
                <div class="hacker-font text-5xl text-[#bc13fe] neon-purple-text">$1500</div>
                <div class="text-sm text-gray-400">CAPEX + OPEX Buffer</div>
            </div>
        </section>

        <!-- Section 2: OPEX Analysis (The Cost of Silence) -->
        <section class="space-y-8">
            <div class="flex items-center justify-between">
                <h2 class="hacker-font text-2xl text-white border-l-4 border-[#bc13fe] pl-4">Цена Молчания (OPEX)</h2>
                <span class="text-xs text-[#00f3ff] border border-[#00f3ff] px-2 py-1">DATA VISUALIZATION</span>
            </div>
            
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Chart 1: Browsers -->
                <div class="cyber-card p-6">
                    <h3 class="text-lg text-white mb-6 font-bold text-center">Аренда Личностей (Антидетект)</h3>
                    <div class="chart-container">
                        <canvas id="adbChart"></canvas>
                    </div>
                    <div class="mt-4 text-xs text-gray-500 text-center border-t border-gray-800 pt-4">
                        > Dolphin Anty: Стандарт индустрии ($71.20)<br>
                        > GoLogin / GeeLark: Экономичная альтернатива ($49.00)
                    </div>
                </div>

                <!-- Chart 2: Proxies -->
                <div class="cyber-card p-6 cyber-border-danger">
                    <div class="absolute top-2 right-2 text-[10px] text-[#ff003c] animate-pulse">CRITICAL EXPENSE</div>
                    <h3 class="text-lg text-white mb-6 font-bold text-center">Цифровой След (Прокси)</h3>
                    <div class="chart-container">
                        <canvas id="proxyChart"></canvas>
                    </div>
                    <div class="mt-4 text-xs text-gray-500 text-center border-t border-gray-800 pt-4">
                        > Mobile KZ (Tier 1): Максимальный траст ($6.42/день)<br>
                        > Server/Res (Tier 2): Высокий риск деанона ($0.03/IP)
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Payment & CAPEX (The Entry Fee) -->
        <section class="grid md:grid-cols-12 gap-8">
            <!-- PST.NET Info -->
            <div class="md:col-span-4 space-y-6">
                <div class="cyber-card p-6 h-full flex flex-col justify-center">
                    <h2 class="hacker-font text-xl text-white mb-6">Шлюз: <span class="text-[#00f3ff]">PST.NET</span></h2>
                    <ul class="space-y-4 text-sm">
                        <li class="flex justify-between items-center border-b border-gray-800 pb-2">
                            <span>Выпуск карты (High-Trust)</span>
                            <span class="text-white font-mono">$12.00</span>
                        </li>
                        <li class="flex justify-between items-center border-b border-gray-800 pb-2">
                            <span>Комиссия (Crypto In)</span>
                            <span class="text-[#ff003c] font-mono">3%</span>
                        </li>
                        <li class="flex justify-between items-center border-b border-gray-800 pb-2">
                            <span>SMS Активация (KZ)</span>
                            <span class="text-white font-mono">~25 RUB</span>
                        </li>
                        <li class="pt-2 text-xs text-gray-500">
                            > Статус: Анонимно<br>
                            > Треккинг: Отсутствует
                        </li>
                    </ul>
                </div>
            </div>

            <!-- CAPEX Chart -->
            <div class="md:col-span-8">
                <div class="cyber-card p-6">
                    <h2 class="hacker-font text-xl text-white mb-6 text-center">Входной Билет (CAPEX)</h2>
                    <div class="chart-container">
                        <canvas id="capexChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: The Protocol (14 Days) -->
        <section class="space-y-8 pb-12">
            <h2 class="hacker-font text-2xl text-white border-l-4 border-[#00f3ff] pl-4">Протокол "Призрак" (14 Дней)</h2>
            <p class="text-sm text-gray-400 max-w-3xl">
                > ВНИМАНИЕ: Нарушение таймингов прогрева повышает вероятность обнаружения (BAN RATE) до 95%.<br>
                > Задача: Эмуляция поведения реального био-объекта.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
                <!-- Step 1 -->
                <div class="cyber-step">
                    <div class="text-xs text-gray-500 mb-1">ФАЗА 1</div>
                    <div class="hacker-font text-xl text-white mb-2">ДНИ 1-3</div>
                    <div class="text-xs text-[#00f3ff]">Инициализация</div>
                    <div class="mt-2 text-[10px] text-gray-400">Создание профиля, базовое наполнение. Без активности.</div>
                </div>
                
                <!-- Arrow Mobile -->
                <div class="md:hidden flex justify-center"><span class="arrow-down">↓</span></div>

                <!-- Step 2 -->
                <div class="cyber-step">
                    <div class="text-xs text-gray-500 mb-1">ФАЗА 2</div>
                    <div class="hacker-font text-xl text-white mb-2">ДНИ 4-7</div>
                    <div class="text-xs text-[#00f3ff]">Мимикрия</div>
                    <div class="mt-2 text-[10px] text-gray-400">Низкая активность. Просмотр ленты. Без лайков.</div>
                </div>

                <!-- Arrow Mobile -->
                <div class="md:hidden flex justify-center"><span class="arrow-down">↓</span></div>

                <!-- Step 3 -->
                <div class="cyber-step">
                    <div class="text-xs text-gray-500 mb-1">ФАЗА 3</div>
                    <div class="hacker-font text-xl text-white mb-2">ДНИ 8-10</div>
                    <div class="text-xs text-[#00f3ff]">Синхронизация</div>
                    <div class="mt-2 text-[10px] text-gray-400">Внутренние лайки/подписки внутри фермы.</div>
                </div>

                <!-- Arrow Mobile -->
                <div class="md:hidden flex justify-center"><span class="arrow-down">↓</span></div>

                <!-- Step 4 -->
                <div class="cyber-step" style="border-color: var(--neon-cyan); box-shadow: 0 0 10px rgba(0, 243, 255, 0.2);">
                    <div class="text-xs text-gray-500 mb-1">ФАЗА 4</div>
                    <div class="hacker-font text-xl text-white mb-2">ДНИ 11-14+</div>
                    <div class="text-xs text-[#00f3ff] font-bold">АКТИВАЦИЯ</div>
                    <div class="mt-2 text-[10px] text-gray-400">Кастомные комментарии. Полная мощность.</div>
                </div>
            </div>
        </section>

        <!-- NEW SECTION: GEMINI AI TERMINAL -->
        <section class="ai-terminal-section space-y-8">
            <div class="text-center space-y-2">
                <h2 class="hacker-font text-3xl text-white">NEURAL OPERATIONS // <span class="text-[#00f3ff] neon-text">AI TERMINAL</span></h2>
                <p class="text-xs text-gray-500 tracking-widest">POWERED BY GEMINI 2.5 FLASH PREVIEW</p>
            </div>

            <!-- API Key Input -->
            <div class="cyber-card p-4 max-w-xl mx-auto flex flex-col space-y-2">
                <label class="text-[10px] text-[#bc13fe] uppercase font-bold">Access Key (Gemini API)</label>
                <input type="password" id="apiKeyInput" placeholder="Вставьте ваш ключ API здесь..." class="ai-input w-full p-2 rounded text-sm bg-black border border-gray-800 focus:border-[#bc13fe]">
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                
                <!-- Module 1: OPSEC AUDITOR -->
                <div class="cyber-card p-6 space-y-4">
                    <div class="flex items-center justify-between">
                        <h3 class="hacker-font text-lg text-white">OPSEC_SCANNER v1.0</h3>
                        <span class="status-dot bg-red-500 animate-pulse"></span>
                    </div>
                    <p class="text-xs text-gray-400">Анализ операционной безопасности. Опишите вашу схему, чтобы выявить уязвимости.</p>
                    
                    <textarea id="opsecPrompt" class="ai-input w-full h-32 p-3 rounded text-sm resize-none" placeholder="ПРИМЕР: Я использую бесплатный VPN, зарегистрировал 5 аккаунтов на один номер..."></textarea>
                    
                    <button onclick="runOpsecScan()" class="ai-btn w-full py-3 rounded hover:shadow-[0_0_15px_rgba(0,243,255,0.5)]">
                        ✨ ЗАПУСТИТЬ СКАНЕР
                    </button>

                    <div id="opsecOutput" class="ai-output-box p-4 rounded hidden overflow-y-auto max-h-64">
                        <div id="opsecLoader" class="hidden text-center py-4">
                            <div class="loader mb-2"></div>
                            <div class="text-[#00f3ff] text-xs animate-pulse">ANALYZING THREAT VECTORS...</div>
                        </div>
                        <div id="opsecContent" class="markdown-body"></div>
                    </div>
                </div>

                <!-- Module 2: MIMICRY ENGINE -->
                <div class="cyber-card p-6 space-y-4">
                    <div class="flex items-center justify-between">
                        <h3 class="hacker-font text-lg text-white">MIMICRY_ENGINE v2.1</h3>
                        <span class="status-dot bg-[#bc13fe] animate-pulse"></span>
                    </div>
                    <p class="text-xs text-gray-400">Генерация "живого" контента для прогрева. Создает комментарии на сленге (RU/KZ mix).</p>
                    
                    <div class="space-y-2">
                        <label class="text-[10px] text-gray-500 uppercase">Тематика Профиля</label>
                        <select id="mimicryTopic" class="ai-input w-full p-2 rounded text-sm">
                            <option value="Lifestyle & Almaty vibes">Лайфстайл / Алматы вайб</option>
                            <option value="Crypto & Tech">Крипта и Темки</option>
                            <option value="Cars & Tuning">Тачки / Тюнинг</option>
                            <option value="Beauty & Fashion">Бьюти / Мода</option>
                        </select>
                    </div>
                    
                    <button onclick="runMimicry()" class="ai-btn w-full py-3 rounded border-[#bc13fe] text-[#bc13fe] hover:bg-[#bc13fe] hover:text-white hover:shadow-[0_0_15px_rgba(188,19,254,0.5)]">
                        ✨ СГЕНЕРИРОВАТЬ ЛИЧНОСТЬ
                    </button>

                    <div id="mimicryOutput" class="ai-output-box p-4 rounded hidden overflow-y-auto max-h-64">
                        <div id="mimicryLoader" class="hidden text-center py-4">
                            <div class="loader mb-2" style="border-top-color: #bc13fe;"></div>
                            <div class="text-[#bc13fe] text-xs animate-pulse">SYNTHESIZING IDENTITY...</div>
                        </div>
                        <div id="mimicryContent" class="markdown-body"></div>
                    </div>
                </div>

                <!-- Module 3: TACTICAL PLANNER -->
                <div class="cyber-card p-6 space-y-4">
                    <div class="flex items-center justify-between">
                        <h3 class="hacker-font text-lg text-white">TACTICAL_PLANNER v3.0</h3>
                        <span class="status-dot bg-[#ff9e00] animate-pulse"></span>
                    </div>
                    <p class="text-xs text-gray-400">Генератор 7-дневного плана "прогрева" (Warm-up) под конкретную нишу для повышения Trust Score.</p>
                    
                    <div class="space-y-2">
                        <label class="text-[10px] text-gray-500 uppercase">Ниша (Niche)</label>
                        <input type="text" id="tacticalNiche" placeholder="Например: Арбитраж, Товарка, Дейтинг..." class="ai-input w-full p-2 rounded text-sm">
                    </div>
                    
                    <button onclick="runTactics()" class="ai-btn w-full py-3 rounded border-[#ff9e00] text-[#ff9e00] hover:bg-[#ff9e00] hover:text-white hover:shadow-[0_0_15px_rgba(255,158,0,0.5)]">
                        ✨ РАЗРАБОТАТЬ ОПЕРАЦИЮ
                    </button>

                    <div id="tacticsOutput" class="ai-output-box p-4 rounded hidden overflow-y-auto max-h-64">
                        <div id="tacticsLoader" class="hidden text-center py-4">
                            <div class="loader mb-2" style="border-top-color: #ff9e00;"></div>
                            <div class="text-[#ff9e00] text-xs animate-pulse">COMPILING STRATEGY...</div>
                        </div>
                        <div id="tacticsContent" class="markdown-body"></div>
                    </div>
                </div>

                <!-- Module 4: SLANG CIPHER -->
                <div class="cyber-card p-6 space-y-4">
                    <div class="flex items-center justify-between">
                        <h3 class="hacker-font text-lg text-white">SLANG_CIPHER v1.5</h3>
                        <span class="status-dot bg-[#00f3ff] animate-pulse"></span>
                    </div>
                    <p class="text-xs text-gray-400">Лингвистическая маскировка. Переводит обычный текст в аутентичный сленг (Алматы/Юг) для DM-рассылок.</p>
                    
                    <textarea id="slangInput" class="ai-input w-full h-32 p-3 rounded text-sm resize-none" placeholder="Текст для перевода: Привет, как дела? Давай встретимся..."></textarea>
                    
                    <button onclick="runSlang()" class="ai-btn w-full py-3 rounded border-white text-white hover:bg-white hover:text-black hover:shadow-[0_0_15px_rgba(255,255,255,0.5)]">
                        ✨ ЗАШИФРОВАТЬ СООБЩЕНИЕ
                    </button>

                    <div id="slangOutput" class="ai-output-box p-4 rounded hidden overflow-y-auto max-h-64">
                        <div id="slangLoader" class="hidden text-center py-4">
                            <div class="loader mb-2" style="border-top-color: #ffffff;"></div>
                            <div class="text-white text-xs animate-pulse">ENCRYPTING SYNTAX...</div>
                        </div>
                        <div id="slangContent" class="markdown-body"></div>
                    </div>
                </div>

            </div>
        </section>


        <footer class="border-t border-gray-900 pt-8 text-center font-mono text-[10px] text-gray-700 pb-8">
            <p>GENERATED BY SYSTEM // SECURE TERMINAL // NO TRACE LEFT</p>
            <p class="mt-2">DATA SOURCE: OPERATIONAL INTEL NOV 2025</p>
        </footer>

    </div>

    <!-- Script Logic -->
    <script>
        // --- Colors & Config ---
        const colors = {
            cyan: '#00f3ff',
            purple: '#bc13fe',
            red: '#ff003c',
            dark: '#0a0a0a',
            text: '#94a3b8',
            grid: 'rgba(31, 41, 55, 0.5)'
        };

        const tooltipTitleCallback = function(tooltipItems) {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) { return label.join(' '); } else { return label; }
        };

        // Global Defaults
        Chart.defaults.font.family = "'JetBrains Mono', monospace";
        Chart.defaults.color = colors.text;
        
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { labels: { color: '#e2e8f0' } },
                tooltip: {
                    backgroundColor: 'rgba(5, 5, 5, 0.9)',
                    titleColor: colors.cyan,
                    bodyColor: '#fff',
                    borderColor: '#333',
                    borderWidth: 1,
                    callbacks: { title: tooltipTitleCallback }
                }
            },
            scales: {
                y: { grid: { color: colors.grid }, ticks: { color: colors.text } },
                x: { grid: { display: false }, ticks: { color: colors.text } }
            }
        };

        // --- Render Charts ---
        new Chart(document.getElementById('adbChart'), {
            type: 'bar',
            data: {
                labels: [['Dolphin Anty', '(100 Prof)'], ['GoLogin', '(100 Prof)'], ['GeeLark', '(100 Prof)'], ['Multilogin', '(100 Prof)']],
                datasets: [{
                    label: 'Месячный OPEX ($)',
                    data: [71.20, 49.00, 49.00, 99.00],
                    backgroundColor: ['rgba(188, 19, 254, 0.7)', 'rgba(0, 243, 255, 0.7)', 'rgba(0, 243, 255, 0.7)', 'rgba(100, 116, 139, 0.5)'],
                    borderColor: [colors.purple, colors.cyan, colors.cyan, colors.text],
                    borderWidth: 1
                }]
            },
            options: commonOptions
        });

        new Chart(document.getElementById('proxyChart'), {
            type: 'bar',
            data: {
                labels: [['Mobile KZ', '(High Trust)'], ['Res/Server', '(Low Trust)']],
                datasets: [{
                    label: 'Цена за 1 IP ($)',
                    data: [6.42, 0.03],
                    backgroundColor: ['rgba(255, 0, 60, 0.8)', 'rgba(100, 116, 139, 0.2)'],
                    borderColor: [colors.red, colors.text],
                    borderWidth: 1
                }]
            },
            options: {
                ...commonOptions,
                scales: {
                    y: {
                        type: 'logarithmic',
                        grid: { color: colors.grid },
                        ticks: { color: colors.text },
                        title: { display: true, text: 'Logarithmic Scale', color: '#475569' }
                    },
                    x: { grid: { display: false }, ticks: { color: colors.text } }
                }
            }
        });

        new Chart(document.getElementById('capexChart'), {
            type: 'bar',
            data: {
                labels: ['FSH (Железо)', 'Cloud (Облако)'],
                datasets: [
                    { label: 'SIM Bank Hardware', data: [1595, 0], backgroundColor: 'rgba(188, 19, 254, 0.8)' },
                    { label: 'Workstation (PC/NUC)', data: [900, 0], backgroundColor: 'rgba(188, 19, 254, 0.4)' },
                    { label: 'Farm Accounts', data: [500, 500], backgroundColor: 'rgba(0, 243, 255, 0.6)' }
                ]
            },
            options: {
                ...commonOptions,
                scales: {
                    x: { stacked: true, grid: { display: false }, ticks: { color: colors.text } },
                    y: { stacked: true, grid: { color: colors.grid }, ticks: { color: colors.text } }
                }
            }
        });

        // --- GEMINI AI LOGIC ---
        
        function getApiKey() {
            const key = document.getElementById('apiKeyInput').value.trim();
            if (!key) {
                alert('ОШИБКА: Введите API Key для доступа к Нейросети.');
                return null;
            }
            return key;
        }

        async function callGemini(apiKey, prompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }]
            };
            
            // Retry Logic (Exponential Backoff)
            let attempts = 0;
            const maxAttempts = 5;
            const delays = [1000, 2000, 4000, 8000, 16000];

            while (attempts < maxAttempts) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP Error: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    if (data.candidates && data.candidates.length > 0) {
                        return data.candidates[0].content.parts[0].text;
                    } else {
                        throw new Error('No response from AI');
                    }
                } catch (error) {
                    attempts++;
                    if (attempts >= maxAttempts) throw error;
                    await new Promise(resolve => setTimeout(resolve, delays[attempts - 1]));
                }
            }
        }

        // 1. OPSEC SCANNER
        async function runOpsecScan() {
            const apiKey = getApiKey();
            if (!apiKey) return;

            const userText = document.getElementById('opsecPrompt').value;
            if (!userText) { alert('Введите данные.'); return; }

            const outputBox = document.getElementById('opsecOutput');
            const loader = document.getElementById('opsecLoader');
            const content = document.getElementById('opsecContent');

            outputBox.classList.remove('hidden');
            loader.classList.remove('hidden');
            content.innerHTML = '';

            const systemPrompt = `
                Role: Cyberpunk Security Auditor for SMM Farm in Kazakhstan.
                Task: Analyze user setup for anonymity leaks.
                Tone: Harsh, military, Russian language.
                Input: "${userText}"
                Output (Markdown): ## STATUS, **THREAT LEVEL**, ### DETECTED FAULTS, ### PROTOCOL UPDATE
            `;

            try {
                const result = await callGemini(apiKey, systemPrompt);
                content.innerHTML = marked.parse(result);
            } catch (error) {
                content.innerHTML = `<span style="color: #ff003c">CONNECTION LOST: ${error.message}</span>`;
            } finally {
                loader.classList.add('hidden');
            }
        }

        // 2. MIMICRY ENGINE
        async function runMimicry() {
            const apiKey = getApiKey();
            if (!apiKey) return;

            const topic = document.getElementById('mimicryTopic').value;
            const outputBox = document.getElementById('mimicryOutput');
            const loader = document.getElementById('mimicryLoader');
            const content = document.getElementById('mimicryContent');

            outputBox.classList.remove('hidden');
            loader.classList.remove('hidden');
            content.innerHTML = '';

            const systemPrompt = `
                Role: SMM Ghostwriter (Almaty).
                Task: Generate 5 short, natural comments for Instagram bots.
                Style: Mix of Russian and Kazakh slang (Almaty dialect).
                Topic: ${topic}
                Output (Markdown list): 1. [Comment]...
            `;

            try {
                const result = await callGemini(apiKey, systemPrompt);
                content.innerHTML = marked.parse(result);
            } catch (error) {
                content.innerHTML = `<span style="color: #ff003c">CONNECTION LOST: ${error.message}</span>`;
            } finally {
                loader.classList.add('hidden');
            }
        }

        // 3. TACTICAL PLANNER
        async function runTactics() {
            const apiKey = getApiKey();
            if (!apiKey) return;

            const niche = document.getElementById('tacticalNiche').value;
            if (!niche) { alert('Введите нишу.'); return; }

            const outputBox = document.getElementById('tacticsOutput');
            const loader = document.getElementById('tacticsLoader');
            const content = document.getElementById('tacticsContent');

            outputBox.classList.remove('hidden');
            loader.classList.remove('hidden');
            content.innerHTML = '';

            const systemPrompt = `
                Role: SMM Strategist for Bot Farm.
                Task: Generate a specific 7-day action plan (Warm-up protocol) to build Trust Score.
                Niche: ${niche}
                Language: Russian.
                Format: Markdown Checklist.
                Day 1: [Actions]
                Day 2: [Actions]
                ...
            `;

            try {
                const result = await callGemini(apiKey, systemPrompt);
                content.innerHTML = marked.parse(result);
            } catch (error) {
                content.innerHTML = `<span style="color: #ff9e00">CONNECTION LOST: ${error.message}</span>`;
            } finally {
                loader.classList.add('hidden');
            }
        }

        // 4. SLANG CIPHER
        async function runSlang() {
            const apiKey = getApiKey();
            if (!apiKey) return;

            const text = document.getElementById('slangInput').value;
            if (!text) { alert('Введите текст.'); return; }

            const outputBox = document.getElementById('slangOutput');
            const loader = document.getElementById('slangLoader');
            const content = document.getElementById('slangContent');

            outputBox.classList.remove('hidden');
            loader.classList.remove('hidden');
            content.innerHTML = '';

            const systemPrompt = `
                Role: Almaty Slang Translator / Rewriter.
                Task: Rewrite the input text into authentic Almaty slang (Russian + Kazakh mix, words like 'jok', 'bazar jok', 'anau-mynau', 'zaeb').
                Input: "${text}"
                Output: Just the rewritten text in bold.
            `;

            try {
                const result = await callGemini(apiKey, systemPrompt);
                content.innerHTML = marked.parse(result);
            } catch (error) {
                content.innerHTML = `<span style="color: #fff">CONNECTION LOST: ${error.message}</span>`;
            } finally {
                loader.classList.add('hidden');
            }
        }
    </script>
</body>
</html>